<% extends 'base.html' %>

<% subskin 'content' -------------------------------------------------------------------- %>
<% render <% session.page %> %>

<% subskin 'welcome' %>

    <b><% note %></b>        

    <p>This is a little game to show off continuations support in Helma NG.
    All you'll have to do is answer a few easy questions.</p>

    <p><a href="<% session.forward %>">start</a></p>

    <p>What's special about this demo is that all pages are generated by
    <a href="http://dev.helma.org/trac/helma/browser/helma-ng/trunk/apps/demo/actions.js#L44">one
    single JavaScript function</a> which is run only once, but resumed and suspended
    earch time a page is rendered. Local variables are stored inside the
    function when it is supsended, so no extra effort is required to 
    manage state between pages.</p>

    <% render 'list' %>

<% subskin 'ask_name' %>

    What is your name? <form method="post" action="<% session.forward %>">
    <input name="name" value="<% data.name %>">
    <input type="submit">
    </form>

    <p><a href="<% session.back %>">back</a> <a href="<% session.forward %>">forward</a></p>

    <% render 'list' %>

<% subskin 'ask_food' %>

    What is your favorite food? <form method="post" action="<% session.forward %>">
    <input name="food" value="<% data.food %>">
    <input type="submit">
    </form>

    <p><a href="<% session.back %>">back</a> <a href="<% session.forward %>">forward</a></p>

    <% render 'list' %>

<% subskin 'ask_animal' %>

    What is your favorite animal? <form method="post" action="<% session.forward %>">
    <input name="animal" value="<% data.animal %>">
    <input type="submit">
    </form>

    <p><a href="<% session.back %>">back</a> <a href="<% session.forward %>">forward</a></p>

    <% render 'list' %>

<% subskin 'result' %>

    Thanks for your collaboration. Your name is <b><% data.name %></b>,
    you love to eat <b><% data.food %></b> and your favorite animal
    is <b><% data.animal %></b>.

    <p><a href="<% session.back %>">back</a></p>

    <% render 'list' %>

<% subskin 'list'%>

    <% for value in <% data %> render 'item'
        | wrap "<div style='color: gray;'>" "</div>"
    %>

<% subskin 'item' %>
   <div><% index %>: <% value %></div>
