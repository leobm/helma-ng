<% extends '../base.html' %>

<% subskin 'headScripts' %>
<script type="text/javascript" charset="utf-8" src="http://ajax.googleapis.com/ajax/libs/jquery/1.2/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8" src="/static/toggle.js"></script>

<% subskin 'content' %>
  <div id="heading">
    <h1><a href="show?id=<% id %>"><% title %></a></h1>
  </div>
</div>

<div id="article-content">
  <p class="article-meta-container">
    <small>
      <em><strong><% creator %></strong> @ <strong><% createTime %></strong></em><br />
      <% adminTasks %>
      <a href="<% href %>#comments"><% commentsCountMsg %></a>
    </small>
  </p>

  <p>
    <% text %>
  </p>
</div>

<a name="comments"></a>
<h2>Comments <small>(<a href="<% href %>#addComment">Add &darr;</a>)</small></h2>
<div id="commentsContainer">
  <% noCommentsMsg %>
  <% listComments %>
</div>

<% loginRegisterInfo %>
<% addCommentForm %>

<% subskin 'adminTasks' %>
<a href="edit?id=<% id %>">&raquo; Edit this article</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="delete?id=<% id %>">&raquo; Delete this article</a>
<br />

<% subskin 'noCommentsMsg' %>
<p>
  <h3>None exist (yet)</h3>
</p>

<% subskin 'commentListItem' %>
<a name="comment<% commentNumber %>"></a>
<p>
  <h3><a href="#comment<% commentNumber %>"><% commentNumber %>#</a> <% commentCreator %> @ <% commentCreateTime %></h3>
  <% commentText %>
</p>

<% subskin 'loginRegisterInfo' %>
<a name="addComment"></a>
<p>
  <strong>
    <a href="/account/login">Login</a> or <a href="/account/register">register</a> for adding comments.
  </strong>
</p>

<% subskin 'addCommentForm' %>
<a name="addComment"></a>
<% message prefix='<div id="message">' suffix='</div>' %>

<p id="to-toggle" style="display: none;">
  <a href="http://daringfireball.net/projects/markdown/basics" target="_blank">Markdown</a> is a <a href="http://en.wikipedia.org/wiki/Lightweight_markup_language" target="_blank">lightweight markup language</a>, originally created by John Gruber and Aaron Swartz, which aims for maximum readability and "publishability" of both its input and output forms, taking many cues from existing conventions for marking up plain text in email.
</p>

<form action="/comments/create" method="post" accept-charset="utf-8">
  <input type="hidden" name="articleId" value="<% id %>" id="articleId" />

<div id='add-comment-container'>
  <p>
    <label for="text" id="add-comment-label">Comment:</label>
    <span id="add-comment-toggle-container">
      <small>(<a href="#" id="toggle">Some Markdown is fine.</a>)</small>
    </span><br />
    <textarea name="text" id="text" rows="12" cols="56"></textarea>
  </p>
</div>

  <p>
    <input type="submit" name="save" value="OK" />
  </p>
</form>